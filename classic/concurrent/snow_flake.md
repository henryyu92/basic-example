## SnowFlake 算法

SnowFlake 算法用于生成全局唯一有序的 ID，相对于 UUID 而言 SnowFlake 算法生成的 ID 是有序的而且是单调递增的，这对于 Mysql 的主键等应用场景会更加合适。

SnowFlake 算法是一种以划分命名空间来生成 ID 的算法，这种方案把 64 bit 分别划分成多段分别来标识机器、时间等。SnowFlake 算法的核心思想是：使用 41 bit 作为毫秒数，10 bit 作为机器的 ID，12 bit 作为毫秒内的流水，符号位永远是 0

```
   0 00000000000000000000000000000000000000000 0000000000 000000000000

符号位                    毫秒数                 机器 id    12 bit 序列号
```
- 毫秒数存储的是当前时间和算法开始时间的差值，41 位保存的时间差可以达到 ```(1 << 41)/(1000 * 60 * 60 * 24 * 265) = 69``` 年
- 10 位的数据机器位可以部署在 1024 个节点
- 12 位序列号表示单节点在每毫秒内支持生成的 ID 序列号位 2^12 个

SnowFlake 算法毫秒数在高位，自增序列在地位，整个 ID 都是趋势递增的，但是 SnowFlake 依赖机器的时钟，如果出现时钟回拨则会导致生成的 ID 重复




https://tech.meituan.com/2017/04/21/mt-leaf.html