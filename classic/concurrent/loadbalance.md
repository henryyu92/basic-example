## 负载均衡
### 轮询
#### 简单轮询
#### 加权轮询
#### 平滑加权轮询
### 随机
#### 加权随机
> 将权重值相加得到权重和 sum 并将[0, sum) 划分为几个区间，使用随机函数在 [0, sum) 上随机生成一个数，由于随机函数是等概率的，因此当随机数在哪个区间上时就对应是哪个服务 
### 最小活跃数
> 每个服务提供者对应一个活跃数 active 且初始值为 0，每收到一个请求活跃数加 1，完成请求后活跃数减 1

## 一致性哈希
一致性哈希(Consistent Hashing)算法将整个哈希值空间组织成一个虚拟的圆环，整个空间按照顺时针方向组织。

假设某哈希函数 H 的值空间为 0~2^32-1 则整个值空间均匀分布在一个圆上面，0 和 2^32-1 重合。
- 将服务器节点(nodeId 或者 IP)使用 hash 算法进行哈希，这样能确定每个服务器在哈希环上的位置
- 存数数据时先对数据使用相同的 hash 算法计算数据在圆上的位置，从此位置顺时针寻找到第一个服务器节点的位置即为该数据存储的节点
- 当服务器节点故障时，顺时针特性保证只有该服务器节点与环空间中前一个节点(逆时针第一个服务器节点)之间的数据会受到影响
- 当增加服务器节点是，顺时针特性保证只有增加的服务器节点与其前一个节点间的数据会收到影响
- 当服务器节点太少时，顺势针特性会导致数据分布倾斜，一致性哈希引入了虚拟节点，即一个服务器节点会计算多个 hash 值，所有找到这些 hash 值得数据都存储在同一个节点上


### 实现